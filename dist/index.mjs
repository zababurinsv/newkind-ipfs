let e=Object.prototype.hasOwnProperty,l=Object.prototype.toString;var a=function(a){if(null==a)return!0;if("boolean"==typeof a)return!1;if("number"==typeof a)return 0===a;if("string"==typeof a)return 0===a.length;if("function"==typeof a)return 0===a.length;if(Array.isArray(a)){return a instanceof Object?0===Object.keys(a).length:0===a.length}if(a instanceof Error)return""===a.message;if(a.toString==l)switch(a.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===a.size;case"[object Object]":for(var o in a)if(e.call(a,o))return!1;return!0}return!1};function o(e,l){var a={},o=(l=l||{}).short,t=e.split("__"),m=t[0].split("_");if(a.block=m[0],m.length>1&&(a.mod=m[1],m[2]&&(a[o?"val":"modVal"]=m[2])),t.length>1){var s=t[1].split("_");a.elem=s[0],s.length>1&&(a[o?"mod":"elemMod"]=s[1],s[2]&&(a[o?"val":"elemModVal"]=s[2]))}return a}function t(e,l,o,t,m,s,n){for(let r in l)switch(r){case"block":case"elemModVal":break;case"elem":switch(s){case 0:a(e[t[0]])&&(e[t[0]]=[]),o&&(a(e[t[0]].main)&&(e[t[0]].main=[]),e[t[0]].main.push(n));break;case 1:a(e[t[0]])&&(e[t[0]]=[]),a(e[t[0]][t[1]])&&(e[t[0]][t[1]]=[]),o&&(a(e[t[0]][t[1]].main)&&(e[t[0]][t[1]].main=[]),e[t[0]][t[1]].main.push(n));break;case 2:a(e[t[0]])&&(e[t[0]]=[]),a(e[t[0]][t[1]])&&(e[t[0]][t[1]]=[]),a(e[t[0]][t[1]][t[2]])&&(e[t[0]][t[1]][t[2]]=[]),o&&(a(e[t[0]][t[1]][t[2]].main)&&(e[t[0]][t[1]][t[2]].main=[]),e[t[0]][t[1]][t[2]].main.push(n));break;case 3:a(e[t[0]])&&(e[t[0]]=[]),a(e[t[0]][t[1]])&&(e[t[0]][t[1]]=[]),a(e[t[0]][t[1]][t[2]])&&(e[t[0]][t[1]][t[2]]=[]),a(e[t[0]][t[1]][t[2]][t[3]])&&(e[t[0]][t[1]][t[2]][t[3]]=[]),o&&(a(e[t[0]][t[1]][t[2]][t[3]].main)&&(e[t[0]][t[1]][t[2]][t[3]].main=[]),e[t[0]][t[1]][t[2]][t[3]].main.push(n));break;case 4:a(e[t[0]])&&(e[t[0]]=[]),a(e[t[0]][t[1]])&&(e[t[0]][t[1]]=[]),a(e[t[0]][t[1]][t[2]])&&(e[t[0]][t[1]][t[2]]=[]),a(e[t[0]][t[1]][t[2]][t[3]])&&(e[t[0]][t[1]][t[2]][t[3]]=[]),a(e[t[0]][t[1]][t[2]][t[3]][t[4]])&&(e[t[0]][t[1]][t[2]][t[3]][t[4]]=[]),o&&(a(e[t[0]][t[1]][t[2]][t[3]][t[4]].main)&&(e[t[0]][t[1]][t[2]][t[3]][t[4]].main=[]),e[t[0]][t[1]][t[2]][t[3]][t[4]].main.push(n));break;default:console.warn("не хватает ячеек")}break;case"elemMod":switch(s){case 0:a(e[t[0]][`${l.elemMod}`])&&(e[t[0]][`${l.elemMod}`]=[]),m?(a(e[t[0]][`${l.elemMod}`][`${l.elemModVal}`])&&(e[t[0]][`${l.elemMod}`][`${l.elemModVal}`]=[]),e[t[0]][`${l.elemMod}`][`${l.elemModVal}`].push(n)):(a(e[t[0]][`${l.elemMod}`].main)&&(e[t[0]][`${l.elemMod}`].main=[]),e[t[0]][`${l.elemMod}`].main.push(n));break;case 1:a(e[t[0]][t[1]][`${l.elemMod}`])&&(e[t[0]][t[1]][`${l.elemMod}`]=[]),m?(a(e[t[0]][t[1]][`${l.elemMod}`][`${l.elemModVal}`])&&(e[t[0]][t[1]][`${l.elemMod}`][`${l.elemModVal}`]=[]),e[t[0]][t[1]][`${l.elemMod}`][`${l.elemModVal}`].push(n)):(a(e[t[0]][t[1]][`${l.elemMod}`].main)&&(e[t[0]][t[1]][`${l.elemMod}`].main=[]),e[t[0]][t[1]][`${l.elemMod}`].main.push(n));break;case 2:a(e[t[0]][t[1]][t[2]][`${l.elemMod}`])&&(e[t[0]][t[1]][t[2]][`${l.elemMod}`]=[]),m?(a(e[t[0]][t[1]][t[2]][`${l.elemMod}`][`${l.elemModVal}`])&&(e[t[0]][t[1]][t[2]][`${l.elemMod}`][`${l.elemModVal}`]=[]),e[t[0]][t[1]][t[2]][`${l.elemMod}`][`${l.elemModVal}`].push(n)):(a(e[t[0]][t[1]][t[2]][`${l.elemMod}`].main)&&(e[t[0]][t[1]][t[2]][`${l.elemMod}`].main=[]),e[t[0]][t[1]][t[2]][`${l.elemMod}`].main.push(n));break;case 3:a(e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`])&&(e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`]=[]),m?(a(e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`][`${l.elemModVal}`])&&(e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`][`${l.elemModVal}`]=[]),e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`][`${l.elemModVal}`].push(n)):(a(e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`].main)&&(e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`].main=[]),e[t[0]][t[1]][t[2]][t[3]][`${l.elemMod}`].main.push(n));break;default:console.log("недостаточно ячеек для обработки")}break;default:console.log("неизвестное свойство",r,{obj:l})}}var m=(e,l,a)=>new Promise((async(m,s)=>{let n={};l.forEach((e=>{let l={};"id"===a.type?l=e.id:"class"===a.type?l=1===e.classList.length?e.className:e.classList:"slot"===a.type?l=e.slot:console.warn("неизвестный тип",a);let m={},s={},r={},i=0,d={};if("object"==typeof l)for(let a of l)m=o(a),s=!("elemMod"in m),r="elemModVal"in m,i=0,d={},"elem"in m&&(d=m.elem.split("-"),i=d.length-1),console.log("aaaaaaaaaa",m),t(n,m,s,d,r,i,e);else m=o(l),s=!("elemMod"in m),r="elemModVal"in m,i=0,d={},"elem"in m&&(d=m.elem.split("-"),i=d.length-1),t(n,m,s,d,r,i,e)})),"id"===a.type?e.id=n:"class"===a.type?e.class=n:"slot"===a.type?e.slot=n:console.warn("неизвестный тип"),n={},m(e)})),s=(e=!0,l=document.body)=>new Promise((async(o,t)=>{try{let t={obj:{},params:{}};t.params.debug=e;let s=l.querySelectorAll("[id]"),n=l.querySelectorAll("[class]");t.obj=await m(t.obj,s,{type:"id"}),t.obj=await m(t.obj,n,{type:"class"}),o(new Proxy(t.obj,{get:(e,l)=>(t.params.debug&&console.log({_:"proxy get",prop:l,obj:e,value:e[l]}),e[l]),set:(e,l,o)=>(t.params.debug&&console.log({_:"proxy set",prop:l,obj:e,value:o}),a(e[l])&&(e[l]=[]),e[l]=o,!0)}))}catch(e){o({message:e.message,success:!0,status:!0})}}));export{s as default};